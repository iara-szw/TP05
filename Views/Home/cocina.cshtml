@{ ViewData["Title"] = "cocina"; }
<head>
<link rel="stylesheet" href="~/css/style.css" />
</head> 
<body class="cocina">
<header>
    <a href="#" id="map-icon"><img src="/img/mapaicon.png" alt="mapa"> </a>
</header>
<div id="map-overlay" style="display:none;">
    <div id="map-content">
        <span id="close-map">&times;</span>
        <img src="/img/mapa.png" alt="">
        <a href='@Url.Action("irASala", new { sala = "salaDeEstar", numSala = 1 })' id="botonSala"></a>
        <a href='@Url.Action("irASala", new { sala = "patio", numSala = 2 })' id="botonPatio"></a>
        <a href='@Url.Action("irASala", new { sala = "cocina", numSala = 3 })' id="botonCocina"></a>
        <a href='@Url.Action("irASala", new { sala = "sotano", numSala = 4 })' id="botonSotano"></a>
        <a href='@Url.Action("irASala", new { sala = "baño", numSala = 5 })' id="botonBaño"></a>
        <a href='@Url.Action("irASala", new { sala = "salaDeRetratos", numSala = 6 })' id="botonRetratos"></a>
        <a href='@Url.Action("irASala", new { sala = "biblioteca", numSala = 7 })' id="botonBiblioteca"></a>
        <a href='@Url.Action("irASala", new { sala = "estudio", numSala = 8 })' id="botonEstudio"></a>
          <h3 id="nombreSala">Sala de Estar</h3>
        <h3 id="nombrePatio">Patio</h3>
        <h3 id="nombreCocina">Cocina</h3>
        <h3 id="nombreSotano">Sótano</h3>
        <h3 id="nombreBaño">Baño</h3>
        <h3 id="nombreRetrato">Sala de Retrato</h3>
        <h3 id="nombreBiblioteca">Biblioteca</h3>
        <h3 id="nombreEstudio">Estudio</h3>
    </div>
</div>
        <a href="@Url.Action("estanteria")"></a>
   
        <div>

        <script>document.getElementById("map-icon").addEventListener("click", function (e) {
            e.preventDefault();
            document.getElementById("map-overlay").style.display = "block";
        });


        document.getElementById("close-map").addEventListener("click", function () {
            document.getElementById("map-overlay").style.display = "none";
        });


        window.addEventListener("click", function (e) {
            if (e.target === document.getElementById("map-overlay")) {
                document.getElementById("map-overlay").style.display = "none";
            }
        });</script>
        @{ if(ViewBag.estaDesbloqueada==false){
            
<div id="overlayDialogo" class="overlay oculto">
  <div class="contenedorDialogoPersonaje" id="contenedorPatio">
<img src="/img/olga.png" id="personajeDialogo">
      <h2 id="nombrePersonaje">Olga (Cocinera)</h2>
    <p id="textoDialogo"></p>
</div>
</div>
        <img src='/img/olga.png' id="olga"  style="cursor:pointer;">

        <script> 
      window.onload = function () {
    const dialogosOlga = [
        "¡Ah, joven! Buenos días. Ah, ¿quiere abrir el cajón ese?",
        "Creo que yo tenía la llave pero no la puedo ir a buscar, tengo que preparar el té ahora para el señor. Si me ayudas a preparar el té puedo conseguir la llave… ",
        "El té del señor es muy específico, si no está hecho correctamente él lo va a rechazar, la receta es fácil pero los frascos de ingredientes están mezclados y no los puedo descifrar. Usted seguro que sí le sale, avísame cuando termine y le abriré el cajón."
    ];

    const dialogosOlgaRepetido = [
        "¡Ah, joven! ¿Todavía no preparó el té?",
        "Ayudaría pero tengo que buscar la llave. Tiene un pequeño papel con una ayuda en el estante si lo necesita.",
        "Confío en usted."
    ];

    let dialogoIdOlga = 0;
    let dialogoYaRecorridoOlga = false;

    const overlayOlga = document.getElementById("overlayDialogoOlga");
    const contenedorOlga = document.getElementById("contenedorDialogoOlga");
    const textoOlga = document.getElementById("textoDialogoOlga");

    function mostrarDialogoOlga() {
        if (!dialogoYaRecorridoOlga && dialogoIdOlga < dialogosOlga.length) {
            textoOlga.textContent = dialogosOlga[dialogoIdOlga];
            dialogoIdOlga++;
        } else if (dialogoYaRecorridoOlga && dialogoIdOlga < dialogosOlgaRepetido.length) {
            textoOlga.textContent = dialogosOlgaRepetido[dialogoIdOlga];
            dialogoIdOlga++;
        } else {
            overlayOlga.classList.add("oculto");
            dialogoIdOlga = 0;
            dialogoYaRecorridoOlga = true;
        }
    }

    // Click en Olga para iniciar diálogo
    document.getElementById("olga").addEventListener("click", function () {
        overlayOlga.classList.remove("oculto");
        mostrarDialogoOlga();
    });

    // Click en el contenedor para avanzar
    contenedorOlga.addEventListener("click", function () {
        mostrarDialogoOlga();
    });

    // Barra espaciadora para avanzar
    document.addEventListener("keydown", function (e) {
        if (!overlayOlga.classList.contains("oculto") && e.code === "Space") {
            e.preventDefault();
            mostrarDialogoOlga();
        }
    });
};
    }
        const pista = document.querySelector('.pistaFrascos');

        pista.addEventListener('click', () => {
         pista.classList.toggle('active');

        }); 

        
        </script>
        }}
</body>